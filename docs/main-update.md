# 更新

<!-- This page demonstrates some of the built-in markdown extensions provided by VitePress. -->

## v0.6.55 20250907-032208 [Beta]

###### 🔧核心功能优化
- **重构主体逻辑代码**：
     - 重构缓存逻辑
     - 重构迭代查询代码
     - 重构递归查询代码
- **优化分流代码**：优化 SNI 相关代码，提升处理效率
- **优化CDN优选**：CDN优选分组支持使用CNAME
- **增加客户端列表**：支持按json配置单独客户端

## v0.6.20 20250821-080559 [Beta] - 历史版本

###### 🔧核心功能优化

- **简化 ECS 处理逻辑**：优化 ECS 相关函数的实现，提升处理效率
- **修复 SNI 检测中的 DNS 查询子网错误**：客户端内外网查询时使用不同的子网
- **支持智能 ECS**：根据客户端 IP 智能设置 ECS 子网
- **支持黑白名单 CIDR 格式**：增强黑白名单的灵活性
- **减少 SNI 检测与污染检测次数**：优化检测逻辑，降低系统负载
- **支持自定义 DoH 查询路径**：可配置 `/dns-query` 或其他路径
- **优化缓存清理机制**：定期清理 TTL 过期或权重过低的缓存
- **支持运行时检查程序及依赖文件**：当缺少依赖文件时自动调整工作模式
- **优化重启逻辑**：重启时清理数据库陈旧缓存并压缩数据库
- **支持 PTR 查询的上游 DNS 配置**：避免返回错误状态码导致查询阻塞
- **支持 SERVFAIL 不写入缓存**：提升缓存数据的可靠性
- **支持多 Question 查询**：增强对复杂查询的处理能力
- **支持 DoT/DoH 上游查询**：增强与加密 DNS 协议的兼容性
- **支持 TCP 查询优化**：提升 TCP 查询的响应效率
- **支持 DNS-over-HTTP (DoH)**：提供独立的 DoH 端口配置
- **支持 ECS 数据区分用户位置**：提升分流准确性
- **支持懒加载数据库统计**：优化数据库查询性能
- **支持差异同步功能**：主从服务器之间同步改写列表数据

###### 🌐Web控制台增强

- **IPTables 数据为空时返回 JSON 错误而非 null**：提升 API 响应规范性
- **支持 iOS 配置文件下载**：便于移动设备快速配置
- **修复历史记录域名标头位置**：提升界面一致性
- **为不同协议类型分配不同图标**：增强可视化识别度
- **增加 IP 白名单中间件**：除认证 URL 外均进行 IP 校验
- **支持 SNI 自动列表在 WebUI 中修改并同步**：提升配置灵活性
- **支持快捷开关选项**：便于快速启用/禁用功能
- **支持客户端列表和查询统计排序**：提升数据可读性
- **支持查看数据改写来源（如漫游、SNI、CDN 等）**：增强查询追踪能力
- **支持用户认证密码保存至 INI**：简化登录流程
- **支持域前置列表管理**：增强域名转发能力
- **支持统计图表展示**：如上游请求次数线性图

###### 🛡️安全性与稳定性

- **修复 Web 中间件 IP 白名单逻辑**：增强访问控制
- **修复数据库写入锁冲突问题**：提升并发稳定性
- **修复 IPv6 内网判断逻辑**：避免错误识别为外网查询
- **修复重启服务时的问题**：提升服务可靠性
- **修复首次查询权重错误**：确保权重初始值为 0
- **修复历史记录状态显示错误**：确保数据一致性
- **支持污染 IP 收集器**：增强污染检测能力
- **支持 IP 屏蔽收集器**：提升黑名单有效性
- **支持 SNI 阻断收集器**：增强 SNI 检测能力

###### 📦其他优化

- **更新至 Go 1.25**：保持语言版本最新
- **支持立即更新 DDNS 命令**：便于手动触发更新
- **支持清除本机 DNS 缓存功能**：便于调试与测试
- **支持外部 Hosts 数据**：提升集成能力
- **按时间间隔统计查询次数**：增强监控能力
- **支持客户端认证密码串快速通行**：简化白名单添加流程

<!-- ## More

Check out the documentation for the [full list of markdown extensions](https://vitepress.dev/guide/markdown). -->
